<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Funebra Math-Art Engine ‚Äî Test 0006 (Parametric Geometry Lab)</title>


  <!-- SEO / Canonical -->
  <meta name="description" content="A lightweight, hackable, browser‚Äëbased math‚Äëart engine. Create geometry, chaos patterns, and visual experiments directly in your browser." />
  <meta name="keywords" content="math art engine, browser math tool, funebra, parametric art, geometry engine, geogebra alternative, hackable math studio" />
  <meta name="author" content="Peter M. Lugha" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://funebra.github.io/math-art-engine/test/0006/" />

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://funebra.github.io/math-art-engine/test/0006/" />
  <meta property="og:title" content="Math‚ÄëArt Engine 1.0 ‚Äî Funebra" />
  <meta property="og:description" content="Hackable, browser‚Äëbased math‚Äëart studio." />
  <meta property="og:image" content="https://funebra.github.io/math-art-engine/assets/og/funebra-og.png" />
  <meta property="og:image:alt" content="Funebra star logo" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Math‚ÄëArt Engine 1.0 ‚Äî Funebra" />
  <meta name="twitter:description" content="Hackable, browser‚Äëbased math‚Äëart studio." />
  <meta name="twitter:image" content="https://funebra.github.io/math-art-engine/assets/og/funebra-og.png" />

  <!-- Icons -->
  <link rel="icon" href="https://robot.at.ua/bluetooth/logo/star.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="funebra_favicon_16.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="funebra_favicon_32.png" />
  <link rel="icon" type="image/png" sizes="64x64" href="funebra_favicon_64.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="funebra_favicon_180.png" />
  <meta name="theme-color" content="#0e1020" />

  <!-- Import map to resolve bare module specifiers used by dependencies (e.g., "three") -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
    }
  }
  </script>

  <!-- DOM snapshot lib for PNG/GIF capture -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" defer></script>

  <style>
    :root{
      --bg:#0b0d12; --panel:#111720; --ink:#e7ecff; --mute:#9aa3b2; --fx:#ff7a18;
      --fx2:#ffd8b0; --acc:#2bd4cf; --user:#1e293b; --assistant:#18212c;
    }
    html,body { height:100% }
    body { margin:0; background:var(--bg); color:var(--ink); }

    /* Background canvas */
    #funebraCanvas{position:fixed; inset:0; pointer-events:none; z-index:0; }

    /* Export toolbar */
    #exportBar {
      position:fixed; right:10px; bottom:10px; z-index:99999;
      display:flex; gap:8px; align-items:center;
      background:rgba(0,0,0,.5); padding:8px 10px; border-radius:8px; color:#fff;
      font:14px/1.2 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
    }
    #exportBar button { border:0; border-radius:6px; padding:6px 10px; cursor:pointer; }
    #btnPng { background:#0ea5e9; color:#fff }
    #btnGif { background:#22c55e; color:#000 }
    #btnCancel { background:#ef4444; color:#fff; display:none }

    /* Forum/console‚Äëstyle UI (kept from your theme) */
    div,page01, page02, page03, page04{margin:0;background:var(--bg);color:var(--ink);font:15px/1.6 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .wrap{max-width:980px;margin:40px auto;padding:0 16px}
    header{margin-bottom:24px}
    header h1{margin:0 0 8px;font-size:26px;letter-spacing:.2px}
    header .meta{color:var(--mute);font-size:13px}
    .thread{display:grid;gap:14px}
    .msg{border:1px solid #1e2430;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,.03),transparent);overflow:hidden}
    .msg .bar{display:flex;align-items:center;gap:10px;padding:10px 14px;background:linear-gradient(90deg,#0f1623,transparent)}
    .msg.user .bar{background:linear-gradient(90deg,#132034,transparent)}
    .msg.assistant .bar{background:linear-gradient(90deg,#142032,transparent)}
    .msg .role{font-weight:600; font-size:13px; letter-spacing:.3px;text-transform:uppercase; color:var(--fx)}
    .msg.user .role{color:var(--acc)}
    .msg .time{margin-left:auto;color:var(--mute);font-size:12px}
    .msg .body{padding:14px 16px;background:rgba(255,255,255,.02)}
    .msg .body h2{margin:12px 0 6px;font-size:18px}
    .msg .body h3{margin:10px 0 6px;font-size:16px}
    .msg .body p{margin:8px 0}
    .msg .body ul, .msg .body ol{margin:8px 0 8px 22px}
    .code, pre{background:#0d1117;border:1px solid #1f2633;border-radius:10px;padding:10px;overflow:auto}
    table{border-collapse:collapse;width:100%;background:#0e131c}
    th,td{border:1px solid #202838;padding:8px;vertical-align:top}
    th{background:#131b27}
    .figure{margin:8px 0;padding:10px;border:1px dashed #334057;border-radius:12px;background:#0e141e}
    .figure img{display:block;max-width:100%;height:auto;border-radius:10px}
    .figure figcaption{margin-top:6px;color:var(--mute);font-size:13px}
    footer{margin:28px 0;color:var(--mute);font-size:12px}
    a{color:var(--fx2)}
    a:hover{color:rgb(200, 200, 230);}

    /* Legacy panels remain hidden unless toggled */
    [data-export-ignore] { user-select: none; }
  </style>

  <script src="https://funebra.github.io/math-art-engine/script.module.js" type="module"></script>
  <!-- Legacy libs (HTTPS only). If some are unused, feel free to remove. -->
  <script src="https://plabs.at.ua/game/aftermath.1.6.4/tool-2022-11-22-13-03-Tir.js" defer></script>
  <script src="https://plabs.at.ua/res/math.js" defer></script>
  <script src="https://plabs.at.ua/res/regulators.js" defer></script>
  <script src="https://plabs.at.ua/res/bgspec0012o021o.js" defer></script>
  <script src="https://plabs.at.ua/res/defObj.js" defer></script>
  <!-- jQuery kept for backwards‚Äëcompat pieces that reference it. Remove if truly unused. -->
  <script src="https://plabs.at.ua/res/partner/jquery-1.9.1.min.js" defer></script>
  <script src="https://plabs.at.ua/game/home/matter.js" defer></script>
  <script src="https://plabs.at.ua/res/maths001o017o.js" defer></script>
  <script src="https://plabs.at.ua/res/maths001o021o.js" defer></script>
  <script src="https://plabs.at.ua/game/sacred/defCon.js" defer></script>

  <!-- Global helpers (single source of truth) -->
  <script>
    // Provide a global initEURWave fallback (legacy hook)
    window.initEURWave = window.initEURWave || (async function () {});

    // Make onReady global for modules
    window.onReady = function (fn) {
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', fn, { once:true });
      } else { fn(); }
    };

    // Minimal mvx stub so smoke test passes (replace with real impl if needed)
    window.mvx = window.mvx || function(){ console.log('mvx() stub invoked'); };
  </script>

</head>

<body>
  <!-- Background canvas -->
  <canvas id="funebraCanvas" aria-hidden="true"></canvas>

  <!-- Export toolbar (PNG / GIF) -->
  <div id="exportBar" data-export-ignore>
    <button id="btnPng" type="button" aria-label="Export PNG">üì∏ Export PNG</button>
    <button id="btnGif" type="button" aria-label="Export GIF">üéûÔ∏è Export GIF</button>
    <button id="btnCancel" type="button" aria-label="Cancel export">‚èπ Cancel</button>
    <span id="expStatus" style="margin-left:6px;opacity:.9" aria-live="polite"></span>
  </div>


<script type="module">
  // --- 5√ó7 pixel font for text rendering ---
  const FONT_5x7 = {
    " ": ["00000","00000","00000","00000","00000","00000","00000"],
    "?": ["01110","10001","00010","00100","00100","00000","00100"],
    G:  ["01110","10000","10000","10111","10001","10001","01110"],
    A:  ["00100","01010","10001","10001","11111","10001","10001"],
    M:  ["10001","11011","10101","10101","10001","10001","10001"],
    E:  ["11111","10000","10000","11110","10000","10000","11111"],
    Z:  ["11111","00001","00010","00100","01000","10000","11111"],
    F:  ["11111","10000","10000","11110","10000","10000","10000"],
    U:  ["10001","10001","10001","10001","10001","10001","01110"],
    N:  ["10001","11001","10101","10011","10001","10001","10001"],
    B:  ["11110","10001","10001","11110","10001","10001","11110"],
    R:  ["11110","10001","10001","11110","10100","10010","10001"],
    P:  ["11110","10001","10001","11110","10000","10000","10000"],
    L:  ["10000","10000","10000","10000","10000","10000","11111"],
  };

  // Text ‚Üí flat [x,y,z,...]
  function funebraText(str, {
    step = 12,
    x0 = 0, y0 = 0, z0 = 0,
    letterSpacing = 1,
    lineSpacing = 2,
  } = {}) {
    const data = [];
    const W = 5, H = 7;
    const lines = String(str).toUpperCase().split("\n");
    let cursorY = 0;

    for (const line of lines) {
      let cursorX = 0;
      for (const rawCh of line) {
        const ch = rawCh === " " ? " " : rawCh;
        const grid = FONT_5x7[ch] || FONT_5x7["?"];
        for (let r = 0; r < grid.length; r++) {
          const row = grid[r];
          for (let c = 0; c < row.length; c++) {
            if (row[c] === "1") {
              const X = x0 + (cursorX + c) * step;
              const Y = y0 + (cursorY + r) * step;
              const Z = z0;
              data.push(X, Y, Z);
            }
          }
        }
        cursorX += W + letterSpacing;
      }
      cursorY += H + lineSpacing;
    }
    return data;
  }

  // Image ‚Üí flat [x,y,z,...]
  async function funebraPixelsFromImage(
    url,
    {
      targetHeight = 150,
      threshold = 210,
      invert = false,
      step = 1,
      sampleStride = 1,
      x0 = 0, y0 = 0, z0 = 0,
    } = {}
  ) {
    const img = new Image();
    img.crossOrigin = "anonymous";
    img.src = url;
    await img.decode();

    const scale = targetHeight / img.height;
    const w = Math.max(1, Math.round(img.width * scale));
    const h = targetHeight;

    const canvas = document.createElement("canvas");
    canvas.width = w;
    canvas.height = h;
    const ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0, w, h);

    const { data } = ctx.getImageData(0, 0, w, h);
    const pts = [];

    for (let y = 0; y < h; y += sampleStride) {
      for (let x = 0; x < w; x += sampleStride) {
        const idx = (y * w + x) * 4;
        const r = data[idx];
        const g = data[idx + 1];
        const b = data[idx + 2];
        const a = data[idx + 3];
        if (a < 10) continue;
        const lum = 0.299 * r + 0.587 * g + 0.114 * b;
        const isInk = invert ? lum > threshold : lum < threshold;
        if (!isInk) continue;
        const X = x0 + x * step;
        const Y = y0 + y * step;
        const Z = z0;
        pts.push(X, Y, Z);
      }
    }
    return pts;
  }

  // expose to window so the existing engine + console can see them
  Object.assign(window, { funebraText, funebraPixelsFromImage });
</script>


  
  <!-- Math‚ÄëArt Engine modules (ESM) -->
  <script type="module">
    import Funebra from "https://funebra.github.io/math-art-engine/script.shapes.module.js";
    import { mptaScalar, makeMPTAIntegrator } from 'https://funebra.github.io/math-art-engine/funebra-motion.mpta.module.js';
    window.Funebra = Funebra;

    // Resize the background canvas and draw a tiny pulse so users see it's alive.
    const cvs = document.getElementById('funebraCanvas');
    const ctx = cvs.getContext('2d');
    const fit = () => { cvs.width = innerWidth; cvs.height = innerHeight; };
    addEventListener('resize', fit, { passive:true });
    fit();

    let t = 0;
    function tick(){
      t += 1/60;
      const w = cvs.width, h = cvs.height, r = 80 + Math.sin(t)*40;
      ctx.clearRect(0,0,w,h);
      ctx.beginPath();
      ctx.arc(w/2, h/2, r, 0, Math.PI*2);
      ctx.strokeStyle = 'rgba(255,255,255,0.15)';
      ctx.lineWidth = 2;
      ctx.stroke();
      requestAnimationFrame(tick);
    }
    tick();
  </script>

  <!-- ===== Legacy UI cluster (kept, but with safer defaults) ===== -->
  <div id='pcontrol' data-export-ignore style='background:url(https://plabs.at.ua/bluetooth/trans/still/block_0_0_0.jpg);width:410px;color:black;'>
    <input type='button' value='PaintV..X' onClick='mvx()'>
    <b id='oo'></b>
    <input id='steps' value='3' type='text' style='width:30px;'>
    <b style='background-color:silver;cursor:pointer;' onClick='tul(stepper)'>:  o  </b>
    <input id='eLoop' type='checkbox' checked='false'>
    <br>
    <div id='stepper' style='background:black;visibility:hidden;'>
      <input id='stpStart' value='0' type='text' style='width:30px;'> <---&gt;
      <input id='stpEnd' value='717' type='text' style='width:45px;'>
      <b style='background-color:silver;cursor:pointer;' onClick='tul(stepper)'>: Steps</b><br>
      <input type="button" value="init" onclick="ofcircle=stpEnd.value;initsobj(shape.value);">
      <input type="text" value="autoAssigned" id="shape">
    </div>
    <br>
    <input id='scodeX' type='text' value='rings[u+zx+3]+180' style='background:url(https://plabs.at.ua/bluetooth/trans/still/black.png)100% 100%/100% 100%;color:rgb(200, 200, 230);width:340px;'>
    <b style='background-color:silver'> :x</b>
    <br>
    <input id='scodeY' type='text' value='rings[u+zx+4]+360' style='background:url(https://plabs.at.ua/bluetooth/trans/still/black.png)100% 100%/100% 100%;color:rgb(200, 200, 230);width:340px;'>
    <b style='background-color:silver'> :y</b>
    <br>
    <input id='clor' type='text' value='"rgb("+(cos(iu*cz/120)*360+255)/2+", "+125+","+(cos(iu*gta/120)*360+255)/2+")"' style='background:url(https://plabs.at.ua/bluetooth/trans/still/black.png)100% 100%/100% 100%;color:rgb(200, 200, 230);width:340px;'>
    <b style='background-color:silver'> :Color</b>
    <input id='itext' type='text' style='width:340px;' value='"&#9787;"'>
    <b style='background-color:silver'> :iText</b>
    <br>
    <input type='button' value='toolz' onClick='if(window.tool) tul(tool); if(window.page01) tul(page01); if(eLoop && eLoop.checked == false){ if(window.pl80) tul(pl80); if(window.demLim) tul(demLim); }'>
    <input type='button' value ='Cleanup' onclick='cleanup()'>
    <br>
    <input type='text' id='dta' value='2048' style='width:40px;background:url(https://plabs.at.ua/bluetooth/trans/still/green.png);'>
  </div>

  <div id='pl80' style='position:absolute;background:lightblue;visibility:hidden;width:200px;height:160px;z-index:2;'></div>

  <!-- (page01..page04, cntrForm1, objDef) kept verbatim to preserve behavior; minor aria/safety tweaks below) -->


<div id='tool'
    style='position:absolute;left:252px;top:16px;visibility:hidden;z-Index:1000;background:url(https://plabs.at.ua/bluetooth/trans/still/leaf.gif);'>
    <table collSpacing=0 CollPadding=0 RowSpacing=0 RowPadding=0 vAlign=0>
        <td><select id='selo' onSelect='alert(this.id)'>
                <option id='leaf' value=url("https://plabs.at.ua/bluetooth/trans/still/leaf.gif")>A Leaf ---color
                <option id='leaf' value=url("https://plabs.at.ua/bluetooth/trans/mot/leaf_0_0_0.gif")>A Leaf 0.0.0
                    ---gif
                <option id='leaf' value=url("https://plabs.at.ua/bluetooth/trans/mot/leaves_0_0_0.gif")>Leaves 0.0.0
                    ---gif
                <option id='leaf' value=url("https://plabs.at.ua/bluetooth/trans/mot/leaves_0_0_1.gif")>Leaves 0.0.1
                    ---gif
                <option id='leaf' value=url("https://plabs.at.ua/bluetooth/trans/mot/leaves_0_0_2.gif")>Leaves 0.0.2
                    ---gif
                <option id='leaf' value=url("https://plabs.at.ua/bluetooth/trans/mot/dot_0_0_0.gif")>A dot 0.0.0 ---gif
                <option id='leaf' value=url("https://plabs.at.ua/bluetooth/trans/mot/dot_0_0_1.gif")>A dot 0.0.1 ---gif
                <option id='leaf' value=url("https://plabs.at.ua/bluetooth/trans/mot/fire_0_0_0.gif")>fire 0.0.0 ---gif
                <option id='leaf' value=url("https://plabs.at.ua/bluetooth/trans/mot/rainyday_0_0_0.gif")>Rainy Day
                    0.0.0 ---gif
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/black.png")>A Black Square rdBorder
                    ---background+color
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/block_0_0_0.jpg")>Block 0.0.0
                    ---background+color
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/black_0_0_0.png")>A Black Point
                    ---color_0.0.0
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/black_0_0_1.png")>A Black Point
                    ---color_0.0.1
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/black_0_0_2.png")>A Black Point
                    ---color_0.0.2
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/yellow_0_0_0.png")>A Yellow Point ---
                    color_0.0.0
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/circlegradient_0_0_0.png")>A Circle
                    Gradient --- color_0.0.0
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/clouds_0_0_0.png")>Clouds ---
                    color_0.0.0
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/clouds_0_0_1.png")>Clouds ---
                    color_0.0.1
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/clouds_0_0_3.png")>Clouds ---
                    color_0.0.3
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/comet_0_0_0.png")>Comet ---
                    color_0.0.0
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/blue_0_0_0.png")>A Blue Point ---
                    color_0.0.0
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/blue_3_0_0.png")>A Blue Point ---
                    color_3.0.0
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/bluelight_0_0_0.png")>A Blue Light
                    --- color_0.0.0
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/bluelight_0_0_1.png")>A Blue Light
                    --- color_0.0.1
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/red_0_0_0.png")>A Red Point ---
                    color_0.0.0
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/red_0_0_1.png")>A Red Point
                    ---background+color_0.0.1
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/red_0_0_2.png")>A Red Point
                    ---background+color_0.0.2
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/red_0_0_5.png")>A Red Point
                    ---background+color_0.0.5
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/red_0_0_6.png")>A Red Point
                    ---background+color_0.0.6
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/red_0_1_0.png")>A Red Point
                    ---background+color_0.1.0
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/red_0_1_1.png")>A Red Point
                    ---background+color_0.1.1
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/htmbg_0_0_2.gif")>Old Time School
                    Sheet ---background
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/old_0_0_0.png")>Old Time School 0_0_0
                    ---background
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/utee.png")>A 3D Still Bubble
                    ---color+background
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/point.gif")>A Green 3D Still Point
                    ---color
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/fractalligh_0_0_0.png")>Fractallight
                    0.0.0 ---color
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/mot/trans_lily_0_0_1.gif")>Animated Lily
                    Flower ---color
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/sqr_0_0_1.png")>A Pl Useful 3D Square
                    ---color+background
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/mot/trans_petunia_0_0_2.gif")>A Petunia
                    ---color
                <option id='' value=url("https://plabs.at.ua/bluetooth/graphics/food/46.gif")>Food 46---color
                <option id='' value=url("https://plabs.at.ua/bluetooth/graphics/fire/31.gif")>Fire 31---color
                <option id='' value=url("https://plabs.at.ua/bluetooth/graphics/fun/40.gif")>Fun 40---color
                <option id='' value=url("https://plabs.at.ua/bluetooth/graphics/sport/14.gif")>Sport 14---gif*
                <option id='' value=url("https://plabs.at.ua/bluetooth/trans/still/football_0_0_0.png")>Sport football
                    0.0.0---gif*
                <option id='' value=url("https://plabs.at.ua/bluetooth/graphics/smilies/70.gif")>Smilies 70---color
                <option id='' value=url("https://plabs.at.ua/bluetooth/graphics/lights/37.gif")>Lights 37---color
                <option id='' value=url("https://plabs.at.ua/bluetooth/graphics/technick/80.gif")>Technick 80---color
                <option id='' value=url("./bluetooth/bg/1_107.gif")>BackGround 256x256---gif*
                <option id='' value=url("./bluetooth/bg/ani_water.gif")>Underwater reTURNIII---background
                <option id='' value=url("./bluetooth/bg/rotating_globe.gif")>Global0 reTURNIII---gif*
                <option id='' value=url("./bluetooth/bg/rotating_earth.gif")>Global1 reTURNIII---gif*
                <option id='' value=url("./bluetooth/trans/mot/aquarium_0_0_0.gif")>Aquarium eyeReBourneII---gif*
                <option id='' value=url("./bluetooth/bg/aquarium_0_0_0.jpg")>Aquarium II eyeReBourneII---jpg*
                <option id='' value=url("./bpot/water/afish.gif")>Anime Fish reTURNIII---color
                <option id='' value=url("./bluetooth/trans/mot/afish_0_0_0.gif")>Anime Fish reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/angelfish_0_0_0.gif")>Angelfish Fish reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/bfish_0_0_1.gif")>B Fish reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/clownfish_0_0_0.gif")>Clown Fish reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/discusfish_0_0_0.gif")>Discus Fish reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/discusfish_0_0_1.gif")>Discus II Fish reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/discusfish_0_0_2.gif")>Discus III Fish reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/dolphin_0_0_0.gif")>Dolphin 0.0.0 reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/dolphin_0_0_1.gif")>Dolphin 0.0.1 reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/dolphin_0_0_2.gif")>Dolphin 0.0.2 reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/dolphin_0_1_1.gif")>Dolphin 0.1.1 reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/dolphin_0_1_2.gif")>Dolphin 0.1.2 reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/dolphin_0_1_3.gif")>Dolphin 0.1.3 reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/guppie_0_0_0.gif")>Guppie 0.0.0 reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/guppie_0_0_1.gif")>Guppie 0.0.1 reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/guppie_0_2_0.gif")>Guppie 0.2.0 reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/guppie_0_2_1.gif")>Guppie 0.2.1 reFurBed---color
                <option id='' value=url("./bluetooth/trans/mot/tigerfish_0_0_0.gif")>tiger fish 0.0.0 reFurBed---color
                <option id='' value=url("./bpot/water/bfish.gif")>3D Fish reTURNIII---color
                <option id='' value=url("./bluetooth/bg/quake_0_0_1.jpg")>Quake 0.0.1 ---background
                <option id='' value=url("./sc900.jpg")>Counter Strike ---background
                <option id='' value=url("./bluetooth/trans/counter_strike/counterplay_0_0_0.jpg")>Counter Strike 0.0.0
                    ---background
                <option id='' value=url("./bluetooth/trans/counter_strike/counterplay_0_0_1.jpg")>Counter Strike 0.0.1
                    ---background
                <option id='' value=url("./bluetooth/trans/counter_strike/counterplay_0_0_2.jpg")>Counter Strike 0.0.2
                    ---background
                <option id='' value=url("./bluetooth/bg/blue_gradient_0_0_0.jpg")>Blue Gradient 0.0.0 ---background
                <option id='' value=url("./bluetooth/bg/earth_0_0_0.jpg")>Blue Earth 0.0.0 ---background
                <option id='leaf' value=url("./bluetooth/trans/mot/rainyday_0_0_0.gif")>Rainy Day 0.0.0 ---gif
                <option id='leaf' value=url("./bluetooth/trans/mot/R0010217_20160708075807.jpg")>VR 360 Museum 0.0.0
                    ---gif
                <option id='' value='rgb(255,255,255)'>White ---background only
                <option id='' value=lightgray>LightGray ---background only
                <option id='' value=gray>Gray ---background only
                <option id='' value=rgb(0,0,0)>Black ---background only
            </select><input type='button' value='change' onClick='opaz()'><input id='chk' type='checkbox'
                checked=true><input type='button' value='colors' onClick='tul(page01)'></td>
        <tr>
            <td><input id='wL' type='text' value='cos(o/38.6)*120'><input id='hT' type='text' value='i/74'><img
                    src='https://plabs.at.ua/res/icos/ur.gif' style='position:relative;top:8;width:12;height:24;'
                    title='Undo/Redo or simply input position level'><input id='mPosition' type='text' value='0'
                    style='width:45;'><input type='button' value='moVE' onClick='detrm()'></td>
        </tr>
        <td><input id='bo' type='text' value='rgb(200, 200,230)'><input type='button' value='fillBG'
                onClick='chngBG20()'><input type='button' value='fillB2' onClick='chngBaG()'><input type='button'
                value='SetFill' onClick='bo.value = "url("+clor.value+")";'><input type='button' value='Advanced :(-_-)'
                onClick='tul(cntrForm1);'></td>
        </tr>
    </table><br>
</div>
<div id='cntrForm1' style='position:absolute;top:135;z-Index:1000;left:10;background:brown;visibility:hidden;'><input
        type='button' value='AutoExe' style='background:rgb(230, 200, 200);' onClick='tul(objDef);'><br><input
        type='button' value='close=)' onClick='tul(cntrForm1)'><br><input type='button' id='pgl' value='<Page0'
        onClick='tul(page01);tul(page02);'><input type='button' id='pgr' value='Page1>'
        onClick='tul(page02);tul(page03);'><input type='button' id='pcoords' value='Coords'
        onClick='tul(page03);tul(page04);'><br><b style='cursor:pointer;color:gold;' id='mod2025'
        onClick='mod = 2024;if(this.id.split(&quot;mod&quot;)[1] >= mod){alert(&quot;welcome 2026 :)&quot;)}'>2025</b>
    <div id='a20250001' style='enabled:false;height:;'> 2 parallel circles<br><b id='a20250001stepsEnd'
            onclick='stpEnd.value = this.innerText;'> 119 </b><br><b id='a20250001steps'
            onclick='steps.value = this.innerText;'> 1 </b><br><b id='a20250001x'
            onclick='scodeX.value = this.innerText;'> cos(o*PI/30)*120+ (o > 60 ? 600 : 300) </b><br><b id='a20250001y'
            onclick='scodeY.value = this.innerText;'> sin(o*PI/30) * 120+360 </b><br><a
            href='https://chatgpt.com/s/t_68ada052ed0c8191a6bafbac92b18ea2' target='_blank'>info</a></div>
    <div id='a20250002' style='enabled:false;'> a pentagon<br><b id='a20250002stepsEnd'
            onclick='stpEnd.value = this.innerText;'> 100 </b><br><b id='a20250002steps'
            onclick='steps.value = this.innerText;'> 1 </b><br><b id='a20250002x'
            onclick='scodeX.value = this.innerText;'> edge = floor(o/20);<br>t = (o % 20)/20;<br>x1 =
            cos(edge*2*PI/5)*120 + 300;<br>x2 = cos((edge+1)*2*PI/5)*120 + 300;<br>(1-t)*x1 + t*x2</b><br><b
            id='a20250002y' onclick='scodeY.value = this.innerText;'>y1 = sin(edge*2*PI/5)*120 + 360;<br>y2 =
            sin((edge+1)*2*PI/5)*120 + 360;<br>(1-t)*y1 + t*y2</b><br><a
            href='https://chatgpt.com/s/t_68ada052ed0c8191a6bafbac92b18ea2' target='_blank'>info</a></div>
</div>
<div id='objDef' style='position:absolute;top:135px;z-Index:1000;left:200px;background:brown;visibility:hidden;'>
    <textarea id='oDef'
        style='Width:300px;height:230px;'><table style='position:absolute;left:400px;top:480px;'><tr><td>&lt;div style='width:400;height:100;'&gt;&lt;textarea id='ttxt' style='position:;left:;top:;width:400;height:100;' onClick='this.value = scodeZ.value;' &gt;&lt;/textarea&gt;&lt;br&gt;&lt;input type='button' value='Change'&gt;&gt;getTime()&lt;&lt;/div&gt;</td><td><input type='button' value='Run' onClick='if(ttxt.value != &quot;&quot;){eval(ttext.value)}else{alert(&quotcode is empty&quot;);}'></td></tr></table></textarea><br><input
        type='button' value='Change' onclick='eval(oDef.value)'><input type='button' value='Clear'
        onclick='oDef.value =&quot;&quot;'><input type='button' value='Run Code'
        style='background:green;border-radius:10%;border-bottom:3px dotted orange;' onclick='execon()'></div>
<div id='page01' style='visibility:hidden;background:black;width:300;height:400;position:absolute;right:3px;top:0px;'><b
        style=''><br>
        <center><img src='https://plabs.at.ua/bluetooth/gallery/pplay0001.gif'></center><a
            href='https://info.flagcounter.com/1xp7'><img
                src='//s01.flagcounter.com/count2/1xp7/bg_F1FFB8/txt_000000/border_CCCCCC/columns_4/maxflags_12/viewers_0/labels_0/pageviews_1/flags_0/percent_0/'
                alt='Flag Counter' border='0'></a>
        <div id='page01p1'></div><br><input type='button' value='Play Music' onClick='eval(lista)'><br>
        <center><input type='button' value='000<' onClick=''><input type='text' id='pgindex' style='width:30;'
                value='0'><input type='button' value='>000' onClick=''>
          <div align='left'><h1>Scene Templates</h1><br>
            <font style="cursor:pointer;" onclick='bo.value="url(https://plabs.at.ua/earth/vu/body/FAVPNG_wedding-invitation-picture-frame_je3Wdbt8.png)100% 100%/ 100% 100%,                                  url(https://plabs.at.ua/tools/values/sinaxes_0_0_0.png)100% 100%/100% 100%,                                                        url(https://plabs.at.ua/tools/values/sinrad_0_0_0.png)100% 100%/100% 100%,                url(https://plabs.at.ua/bluetooth/trans/still/clear_0_0_1.png), rgb(200,200,230)";chngBG20()'>
              Math Dream Scene</font>
            
            <div style='width:100%;' align='right'>
            <a id="setX1" style="cursor:pointer;">X-pat 1</a>
                <a id="setY1" style="cursor:pointer;">Y-pat 1</a><br>
            <a id="gridsetup" style="cursor:pointer;">Grid setup</a><br>
            <a id="gridsetup8" style="cursor:pointer;">G 8x8</a>
            <a id="gridsetup12" style="cursor:pointer;">G 12x12</a>
            <a id="gridsetup16" style="cursor:pointer;">G 16x16</a>
            <a id="gridsetup32" style="cursor:pointer;">G 32x32</a>
            <a id="gridsetup64" style="cursor:pointer;">G 64x64</a><br>
            <a id="setfunebraeye101" style="cursor:pointer;">Funebra setup 10 </a>
            <a id="setfunebraeye271" style="cursor:pointer;"> 27 </a>
            <a id="setfunebraeye272" style="cursor:pointer;"> (1) </a>
            <a id="setfunebraeye273" style="cursor:pointer;"> (2) </a>
            <a id="setfunebraeye281" style="cursor:pointer;"> 28 </a><br>
              <a id="setslogo0000" style="cursor:pointer;" onclick="">Logo s 1</a><br>
              <a id="setlatinletter0001" style="cursor:pointer;" onclick="">Chars  A </a>
              <a id="setlatinletter0002" style="cursor:pointer;" onclick=""> B </a><br>
            <a id="settorus0001" style="cursor:pointer;">Torus setup 1</a>
                <a id="setY2"></a><br>
              
             
<script>

  document.getElementById("gridsetup8").onclick = () => {
 steps.value    = 1;
  stpStart.value = 0;
  stpEnd.value   = 8 * 8-1;
  shape.value    = "smileGrid";
  initsobj(shape.value);
  const cols = 8;
  const cellSize = 20;
  scodeX.value =
    "(o % " + 8 + ") * " + 20 +
    " + window.innerWidth/2 - (" + 8 + " * " + 20 + ")/2-10";
  scodeY.value =
    "Math.floor(o / " + 8 + ") * " + 20 +
    " + 300";
  };
  document.getElementById("gridsetup12").onclick = () => {
 steps.value    = 1;
  stpStart.value = 0;
  stpEnd.value   = 12 * 12-1;
  shape.value    = "smileGrid";
  initsobj(shape.value);
  const cols = 12;
  const cellSize = 20;
  scodeX.value =
    "(o % " + 12 + ") * " + 20 +
    " + window.innerWidth/2 - (" + 12 + " * " + 20 + ")/2-10";
  scodeY.value =
    "Math.floor(o / " + 12 + ") * " + 20 +
    " + 260";
  };
  document.getElementById("gridsetup16").onclick = () => {
 steps.value    = 1;
  stpStart.value = 0;
  stpEnd.value   = 16 * 16-1;
  shape.value    = "smileGrid";
  initsobj(shape.value);
  const cols = 16;
  const cellSize = 20;
  scodeX.value =
    "(o % " + 16 + ") * " + 20 +
    " + window.innerWidth/2 - (" + 16 + " * " + 20 + ")/2-10";
  scodeY.value =
    "Math.floor(o / " + 16 + ") * " + 20 +
    " + 220";
  };
  
 document.getElementById("gridsetup32").onclick = () => {
 steps.value    = 1;
  stpStart.value = 0;
  stpEnd.value   = 32 * 32-1;
  shape.value    = "smileGrid";
  //itext.value = "&#0149;";
  initsobj(shape.value);
  const cols = 32;
  const cellSize = 10;
  scodeX.value =
    "(o % " + 32 + ") * " + 10 +
    " + window.innerWidth/2 - (" + 32 + " * " + 10 + ")/2-10";
  scodeY.value =
    "Math.floor(o / " + 32 + ") * " + 10 +
    " + 220";
  };

  /*
    document.getElementById("setfunebraeye271").onclick = () => {
    clor.value = '"rgb("+abs(cos(((o%82)-floor((o+80)/36))/8)*720+fibonacci(((o%27)-floor((cz+40)/6))/8)*720%255)+", 120, 120)";';
};
  document.getElementById("setfunebraeye271").onclick = () => {
    clor.value = '"rgb("+abs(cos(((o%82)-floor((o+80)/36))/8)*720+fibonacci(((o%27)-floor((cz+40)/6))/8)*720%255)+", 120, 120)";';
};
  document.getElementById("setfunebraeye281").onclick = () => {
      itext.value = '"&#0149;"';
    scodeX.value = '(Funebra.wave("sine",     o, 180,  180, 120)  )+ window.innerWidth/2 - (12*20)/2';
    clor.value =  '"rgb("+   (Funebra.wave(&quot;sine&quot;,     o, 120,  32, 135))+","+   (Funebra.wave(&quot;triangle&quot;, o, 120,  64, 135))+","+   (Funebra.wave(&quot;square&quot;,   o, 120, 128, 135))+ ")"';
}; */
    document.getElementById("setlatinletter0002").onclick = () => {
    itext.value = 'let cols = 12; let col  = o % cols; let row  = floor(o / cols);  let s="";    if(      (col==3 && row>=1 && row<=10) ||       (row==1 && col>=3 && col<=6) ||       (row==10 && col>=3 && col<=8) ||      (row==5 && col>=3 && col<=7) ||      (col==6 && row>=2 && row<=4) ||  shape     (col==8 && row>=6 && row<=9) ||     !(col==7 && row==4) &&     !(col==7 && row==6) ){     s="B"; }else{     s=""; }  s;';
};
    document.getElementById("setlatinletter0001").onclick = () => {
    itext.value = 'let cols = 12; let col  = o % cols; let row  = Math.floor(o / cols); let s    = "";  if(     (row > 1 && (col == 3 || col == 8)) ||     (row == 6 && col >= 3 && col <= 8) ||     (row == 1 && col >= 5 && col <= 6) ){     s = "&#9787;"; }else{     s = ""; }  s;';
};
  document.getElementById("settorus0001").onclick = () => {
    itext.value = 'let cols = 12; let col  = o % cols; let row  = floor(o / cols); let cx = (cols - 1) / 2; let cy = cx;  let dx = col - cx; let dy = row - cy;  let R  = 4.5; let d  = sqrt(dx*dx + dy*dy);  let s  = "";  if(d > 3.2 + sin(iu/40)*0.8 && d < 4.8 + sin(iu/40)*0.8) { s = "&#9787;";} else {     s = "o"; }  s;';        

};
  document.getElementById("setfunebraeye101").onclick = () => {
    itext.value = 'let cols = 12; let col  = o % cols; let row  = floor(o / cols); let cx = (cols - 1) / 2; let cy = cx;  let dx = col - cx; let dy = row - cy;  let R  = 4.5; let d  = sqrt(dx*dx + dy*dy);  let s  = "";  if( (d*2741 % 12) < 6 ) { s = "&#9787;";} else {     s = "o"; }  s;'  
;
};
  
  
document.getElementById("setfunebraeye272").onclick = () => {
  clor.value = '"rgb(" + (Math.cos(((15 - (o % 16)) - Math.floor(o / 16)) / 2) * 120 + 135) + ", 120, 120)"';
};

document.getElementById("setfunebraeye271").onclick = () => {
  clor.value = '"rgb(" + (Math.abs(Math.cos(((o % 82) - Math.floor((o + 80) / 36)) / 8) * 120 + (fibonacci((o % 27)) % 120)) % 255) + ", 120, 120)"';
};

document.getElementById("setfunebraeye281").onclick = () => {
  itext.value = '"&#0149;"';
  scodeX.value = '(Funebra.wave("sine", o, 180, 180, 120)) + window.innerWidth/2 - (12*20)/2';
  clor.value =
    '"rgb(" +' +
    ' (Funebra.wave("sine",     o, 120,  32, 135)) + "," +' +
    ' (Funebra.wave("triangle", o, 120,  64, 135)) + "," +' +
    ' (Funebra.wave("square",   o, 120, 128, 135)) +' +
    '")"';
};
/*
document.getElementById("setlatinletter0002").onclick = () => {
  itext.value =
    'let cols = 12; ' +
    'let col  = o % cols; ' +
    'let row  = Math.floor(o / cols); ' +
    'let s    = ""; ' +
    'if ((col == 3 && row >= 1 && row <= 10) || ' +
    '    (row == 1 && col >= 3 && col <= 8)  || ' +
    '    (row == 5 && col >= 3 && col <= 8)  || ' +
    '    (row == 10 && col >= 3 && col <= 8) || ' +
    '    (col == 8 && row >= 2 && row <= 4)  || ' +
    '    (col == 8 && row >= 6 && row <= 9)) ' +
    '{ s = "B"; } else { s = ""; } s;';
};

document.getElementById("setlatinletter0001").onclick = () => {
  itext.value =
    'let cols = 12; ' +
    'let col  = o % cols; ' +
    'let row  = Math.floor(o / cols); ' +
    'let s    = ""; ' +
    'if ((row > 1 && (col == 3 || col == 8)) || ' +
    '    (row == 6 && col >= 3 && col <= 8)  || ' +
    '    (row == 1 && col >= 5 && col <= 6)) ' +
    '{ s = "&#9787;"; } else { s = ""; } s;';
};

document.getElementById("settorus0001").onclick = () => {
  itext.value =
    'let cols = 12; ' +
    'let col  = o % cols; ' +
    'let row  = Math.floor(o / cols); ' +
    'let cx = (cols - 1) / 2; ' +
    'let cy = cx; ' +
    'let dx = col - cx; ' +
    'let dy = row - cy; ' +
    'let d  = Math.sqrt(dx*dx + dy*dy); ' +
    'let s  = ""; ' +
    'let inner = 3.2 + Math.sin(iu/40)*0.8; ' +
    'let outer = 4.8 + Math.sin(iu/40)*0.8; ' +
    'if (d > inner && d < outer) { s = "&#9787;"; } ' +
    'else { s = "o"; } s;';
};

document.getElementById("setfunebraeye101").onclick = () => {
  itext.value =
    'let cols = 12; ' +
    'let col  = o % cols; ' +
    'let row  = Math.floor(o / cols); ' +
    'let cx = (cols - 1) / 2; ' +
    'let cy = cx; ' +
    'let dx = col - cx; ' +
    'let dy = row - cy; ' +
    'let d  = Math.sqrt(dx*dx + dy*dy); ' +
    'let s  = ""; ' +
    'if ((d * 2741) % 12 < 6) { s = "&#9787;"; } else { s = "o"; } s;';
}; */

document.getElementById("setX1").onclick = () => {
  scodeX.value = "o*5 + window.innerWidth/2 - 160";
};

document.getElementById("setY1").onclick = () => {
  scodeY.value = "Math.sin(o/9.2)*120+370";
};

                 document.getElementById("setslogo0000").onclick = () => {
    itext.value='let R = 5; let d = sqrt(cos(o/9.2)*cos(o/9.2) + sin(o/9.2)*6); let s = "";  if (d <= R) {     s = "&#9787;";  } else {     s = ""; }  s;';
            
};
/*
document.getElementById("setslogo0000").onclick = () => {
  itext.value =
    'let R = 5; ' +
    'let x = Math.cos(o/9.2); ' +
    'let y = Math.sin(o/9.2)*6; ' +
    'let d = Math.sqrt(x*x + y*y); ' +
    'let s = ""; ' +
    'if (d <= R) { s = "&#9787;"; } else { s = ""; } s;';
};
*/
document.getElementById("gridsetup").onclick = () => {
  steps.value    = 1;
  stpStart.value = 0;
  stpEnd.value   = 12 * 12;
  shape.value    = "smileGrid";
  initsobj(shape.value);
  const cols = 12;
  const cellSize = 20;
  scodeX.value =
    "(o % " + cols + ") * " + cellSize +
    " + window.innerWidth/2 - (" + cols + " * " + cellSize + ")/2";
  scodeY.value =
    "Math.floor(o / " + cols + ") * " + cellSize +
    " + 260";
  mvx();
};
</script>


            <br>
              

            </div>
            <hr>
                                      <font onclick=''>
              Math shortcuts</font><br> 
            <div style='width:100%;' align='right'>
<a id="setmotion" style="cursor:pointer;" onclick="animate();">Animate</a>
<a id="stopmotion" style="cursor:pointer;" onclick="stopAnimate();">Stop</a>
<script>
//let iu = 0;
let animTimer = null;

function animate(){
  const step = Number(steps.value) || 1;
  const max  = Math.floor(Number(stpEnd.value));
  iu++;
  for(let o = step; o < max; o += step){
    const n = document.getElementById(shape.value + o);
    if(!n) continue;
    if(scodeX.value){
      const x = eval(scodeX.value);
      n.style.left = x + "px";
    }
    if(scodeY.value){
      const y = eval(scodeY.value);
      n.style.top = y + "px";
    }
    if(clor.value){
      n.style.color = eval(clor.value);
    }
  }
  animTimer = setTimeout(animate, Number(dta.value) || 33);
}

function stopAnimate(){
  if(animTimer){
    clearTimeout(animTimer);
    animTimer = null;
  }
}
</script>

            </div>
          </div></center>
    </b>&nbsp;</div>
<div id='page02' style='visibility:hidden;width:360px;'><b style='position:absolute;right:3px;top:0px;'>
        <div style='background:gray;'><b id='mvx1control' onClick='oDef.value=mvx1control.innerText;execon();'
                style='position:absolute;right:0px;align:right;background:url(https://plabs.at.ua/bluetooth/trans/still/black.png)100% 100%/100% 100%;font-family:wingdings;width:60px;height:20px;color:rgb(200, 200, 230);'>mvx()</b><b
                id='stepwireX' onClick='scodeX.value = this.innerText;'
                style='cursor:hand;color:blue;'>[gta+u*cz*3]/120+400</b><br><b id='stepwireY'
                onClick='scodeY.value = this.innerText;'
                style='cursor:hand;color:blue;'>apple(o*u/cz)*apple(o*cz+1)*(1.0/cz)+280</b><br><img
                onClick='scodeY.value = stepwireY.innerText;oDef.value=machine.innerText;execon();'
                src='https://plabs.at.ua/bluetooth/trans/still/lime.png' style='cursor:hand;color:blue;'>Application
            starts today 2021-04-06 11:03<br>apple(o*u/cz)*apple(o*cz+1)*(1.0/cz)+280</img><br><b id='machine'
                onClick='execon();' style='cursor:hand;color:blue;'>mvx()</b><br></div><br>
        <div style='background:lightgray;'>Still researching in a better performance.<br>try to add the following treat
            formula <br>to se reactions...<br><b onClick='scodeY.value = this.innerText;'
                style='cursor:hand;color:blue;'>[gta+u*cz*cos(cz/10)]/180*apple(o*cz+1)*(1.0/cz)+280</b><br><b
                onClick='scodeY.value = this.innerText;'
                style='cursor:hand;color:blue;'>[gta+u*cz*sin(cz/10)*120]/180*cos(o*cz/80)*(3.0/cz)+280</b><br>2021-04-06
            11:49[*-O]<br><b id='image1control' onClick='eval(image1resource.value);'
                style='position:absolute;right:0px;align:right;background:url(https://plabs.at.ua/bluetooth/trans/still/black.png)100% 100%/100% 100%;font-family:wingdings;width:60px;height:20px;color:rgb(200, 200, 230);'>black</b><input
                type='text' id='image1resource' value='https://plabs.at.ua/bpot/cioX/gamebrooke/Molly.gif'
                style='border-radius:10px;'><br>
            <div id='image1container'><img id='image1' src='https://plabs.at.ua/tools/values/drop_0_0_0.gif'
                    style='width:360;height:120;'></div><br><b onClick='scodeY.value = this.innerText;'
                style='cursor:hand;color:rgb(200 , 200, 230);background:url(https://plabs.at.ua/bluetooth/trans/still/black.png);'>[gta+u*cz*sin(o/12.0)]/120*[gta+u+cz+cos(cz/120)]/400+280</b><br>2021-04-06
            12:43[*-O]<br><b onClick='scodeY.value = this.innerText;'
                style='cursor:hand;color:blue;'>cos(gta+o/70)*sin(o/12)*120+[gta+u-zx*cz]/164+280</b><br>2021-04-06
            14:20[*-O]<br>
        </div><br>
        <div style='background:gray;'><b onClick='scodeZ.value = this.innerText;'
                style='cursor:hand;color:blue;'>triangle(point)*120</b><br><b onClick='scodeZ.value = this.innerText;'
                style='cursor:hand;color:blue;'>triangle1(point)</b><br></div><br>
        <div style='background:rgb(30,30,120);color:orange;'>This ObMoves...:<br><b
                onClick='scodeZ.value = this.innerText;' style='cursor:hand;color:;'>puff(120, 50)*120</b><br><b
                onClick='scodeZ.value = this.innerText;' style='cursor:hand;color:;'>puff(150, 60)*120</b><br><b
                onClick='scodeZ.value = this.innerText;' style='cursor:hand;color:;'>puff(150, 90)*120</b><br><b
                onClick='scodeZ.value = this.innerText;' style='cursor:hand;color:;'>psf(point+240)*120</b><br></div>
        <br>
        <div style='background:lightgray;color:green;'>Plasta [01]...:<br><b onClick='scodeZ.value = this.innerText;'
                style='cursor:hand;color:;'>logo1(point)</b><br><b onClick='scodeZ.value = this.innerText;'
                style='cursor:hand;color:;'>logo2(point)</b><br>eval(</div><br>
        <div style='background:gray;color:gold;'>Mag Hornz..[02]...:<br>eval(cos(o+ceil(11.9720)^2) *
            200)+408<br>eval(tan(o) * 190^PI/sin(7.30)^5)+212</div><br>
        <div style='background:lightgray;color:green;'>By Logical[01]Lady...:<br>eval(cos(o+ceil(12.9720)^2) *
            200)+408<br>eval(tan(o) * 190^PI/sin(7.30)^5)+212<br>
            <div id='cp_widget_3a6fa25a-6129-48d3-836b-34eba3189075'>...</div>
        </div><br>
    </b></div>
<div id='page03' style='visibility:hidden;'><b style='position:absolute;right:3px;top:0px;'>
        <div style='background:gray;'><input type='button' value='Export'
                onclick='download(document.getElementById("kordstxt").innerHTML, "pExports"+Math.floor((Math.random()*9999999)+1000000)+".html", "text/html");'><input
                type='button' value='Import' onclick='fread()'><input type='button' value='Clear'
                onClick='isIndex=[0];'><br><textarea id='kordstxt' value='Trying' onClick='this.innerText = isIndex;'
                style='width:300;height:400;'></textarea></div><br>
        <div style='background:lightgray;'>A Little
            Square:<br>eval(floor(cos(o/22)*PI*2))+412<br>eval(floor(cos(o/16)*PI*2))+412</div><br>
        <div style='background:gray;'>Pow fakt:<br>eval(cos(o) * 213)+412<br>eval(sin(o) * 176/pow(42))+240<br>pow()
            acts strange as saving function</div><br>
        <div style='background:lightgray;'>Objective Look At This Circle:<br>eval(cos(o) * 150^3.7)+412<br>eval(sin(o)
            *130^ceil(tan(41.2)))+240</div><br>
        <div style='background:rgb(30,30,120);color:orange;'>Play on...:<br>eval(o * 340 / Math.PI * 2 /
            360)+290<br>eval(cos(o) * 190^sin(9.22))+412</div><br>
        <div style='background:lightgray;color:green;'>Play on[01]...:<br>eval(o * 600 / Math.PI * 2 /
            400)+290<br>eval(cos(o) * 190^PI/sin(7.30)^5)+412</div><br>
        <div style='background:gray;color:gold;'>Play on[02]...:<br>eval(cos(o) * 220)+412<br>eval(cos(o/tan(0.372)) *
            190^sin(9.22))+412</div><br>
        <div style='background:lightgray;color:green;'>By Logical[01]...:<br>eval(cos(o) *
            220)+408<br>eval(sin(o/ceil(PI)) * 120)+408</div><br>
    </b></div>
<div id='page04' style='visibility:hidden;'><b style='position:absolute;right:3px;top:0px;'>
        <div style='background:gray;'>By Logics [02]_Circlez:<br>eval(cos(o+ceil(16.9720)^2) *
            200)+408<br>eval(sin(o+ceil(16.9720)^2) * 200)+208</div><br>
    </b></div>


  <!-- (cntrForm1, page01..page04, objDef blocks copied as‚Äëis from your source to preserve functionality) -->
  <!-- BEGIN: legacy panels (trimmed for brevity; keep your original content here) -->
  <!-- ‚úÇÔ∏è For space, your long page01..page04 and objDef markup should be pasted here unchanged. -->
  <!-- END: legacy panels -->

  <!-- ===== Engine glue (kept close to original; small safety fixes) ===== -->
  <script>
    // NOTE: The following is your legacy loop logic with minor guards to avoid runtime crashes.
    let x = 0, y = 0, i = 600, iCount = 0; const pCounter = [];
    const deg2radians = Math.PI * 2 / 360; let amountOfp = -2;

    let h = 0; let oi = 'DIV'; if(typeof oi === 'undefined'){oi = 'object';}
    function chngBG(){ try{ document.body.style.background = selo.options[selo.selectedIndex].value; }catch(e){} }

    let ca = 1, cb = 324, cz = 0;
    function gear(){ if(ca <= 322){ ca += 2; cz = ca; } setTimeout(gear,200); } gear();
    function osc1(){ if(ca === 323){ if(cb > 1) cb -= 1; cz = cb; } if(cb === 1){ cb = 324; ca = 1; } setTimeout(osc1,200);} osc1();

    let bod = '';
    let ofcircle = 0;
    function printit(){
      try{ pTool1 && pTool1(); }catch(_){}
      if(h < 1024){
        h = h + 1; status = h;
        const ojy = document.createElement(oi);
        ojy.style.position = 'absolute';
        ojy.id = 'bn'+h;
        ojy.onclick = function() {
          mPosition.value = this.id.substring(2);
          try{ oDef.innerText = (window['bn'+this.id.substring(2)]||{}).innerHTML || ''; }catch(_){ }
        };
        ojy.onmouseover = function() {
          const abou = document.createElement("div");
          abou.style.position = "absolute";
          abou.id=this.id+"abou";
          abou.innerText = "Step: "+o+"\nstepStart: "+stpStart.value+"\nstepEnd: "+stpEnd.value+"\nsSpeed : "+dta.value+"\nscodeX : "+scodeX.value+"\nscodeY : "+scodeY.value+"\nsColor : "+clor.value+"\nsCode : "+itext.value;
          this.appendChild(abou);
          mPosition.value = this.id.substring(2);
          try{ oDef.innerText = (window['bn'+this.id.substring(2)]||{}).innerHTML || ''; }catch(_){ }
          this.onmouseout = function() {
            const div = this.querySelector('div');
            if(div) this.removeChild(div);
          };
        };
        ojy.style.cursor='pointer';
        document.body.appendChild(ojy);
        if(h == 20){
          bod += "<div id='pcontrol' style='background:url(https://plabs.at.ua/bluetooth/trans/still/block_0_0_0.jpg);width:410px;color:black;'><input type='button' value='PaintV..X' onClick='mvx()'><b id='oo'></b>"+
          "<input id='steps' value='3' type='text' style='width:30px;'><b style='background-color:silver;cursor:pointer;' onClick='tul("+'stepper'+")'>:  o  </b><input id='eLoop' type='checkbox' checked='false'><br>"+
          "<div id='stepper' style='background:black;visibility:hidden;'><input id='stpStart' value='0' type='text' style='width:30px;'>&lt;---&gt;<input id='stpEnd' value='717' type='text' style='width:45px;'><b style='background-color:silver;cursor:pointer;' onClick='tul("+'stepper'+")'>: Steps</b></div><br>"+
          "<input id='scodeX' type='text' value='rings[u+zx+3]+180' style='background:url(https://plabs.at.ua/bluetooth/trans/still/black.png)100% 100%/100% 100%;color:rgb(200, 200, 230);width:340px;'><b style='background-color:silver'> :x</b><br>"+
          "<input id='scodeY' type='text' value='rings[u+zx+4]+360' style='background:url(https://plabs.at.ua/bluetooth/trans/still/black.png)100% 100%/100% 100%;color:rgb(200, 200, 230);width:340px;'><b style='background-color:silver'> :y</b><br>"+
          "<input id='clor' type='text' value='"+'\"rgb("+(cos(iu*cz/120)*360+255)/2+", "+125+","+(cos(iu*gta/120)*360+255)/2+")\"'+"' style='background:url(https://plabs.at.ua/bluetooth/trans/still/black.png)100% 100%/100% 100%;color:rgb(200, 200, 230);width:340px;'><b style='background-color:silver'> :Color</b>"+
          "<input id='itext' type='text' style='width:340px;' value='"+'\"&#9787;\"'+"'><b style='background-color:silver'> :iText</b><br>"+
          "<input type='button' value='toolz' onClick='tul("+'tool'+");tul("+'page01'+");if(eLoop.checked == false){if(window.pl80) tul("+'pl80'+");if(window.demLim) tul("+'demLim'+")}'><input type='button' value ='Cleanup' onclick ='cleanup()'><br><input type='text' id='dta' value='2048' style='width:40px;background:url(https://plabs.at.ua/bluetooth/trans/still/green.png);'></div><div id='pl80' style='position:absolute;background:lightblue;visibility:hidden;width:200px;height:160px;z-Index:2;'></div>";
          setTimeout(printit,50);
        }
      }
    }

    let o = 0; let lTmer =0; let hPntz =0;
    function detrm(){ o = Number(mPosition.value)||0; }
    function def(){ try{ (window['bn'+(Number(mPosition.value)||0)]||{}).innerHTML = oDef.value; }catch(_){}}
    let isIndex = []; let ob = 0; let isId = 0; let u = 0; let iu = 600; let zx = 0;

    function mvx(){
      if(eLoop.checked === true && Number(steps.value) >= 0 ){ status = x; }
      const stepVal = Number(steps.value)||1;
      const endVal  = Math.floor(Number(stpEnd.value)||0) / stepVal;
      if(o <= endVal){
        o = o + (Number(stpStart.value)||0) + stepVal; const m=shape.value+o; oo.innerText=o; ob=ob+1; isId +=1; u += 1;
        iu = u*3; zx = zx + 2; i = i - stepVal; iCount += 3.1415; const rad = iCount * deg2radians;
        const costheta = Math.cos(rad), sintheta = Math.sin(rad);
        x = x + costheta; y = y + sintheta;
        if(chk && chk.checked === true){
          const el = document.getElementById(m);
          if(el){
            el.style.zIndex = String(o);
            try{
              if(String(clor.value).substring(1, 4)==='rgb'){
                with(Math){
                  el.innerHTML = eval(itext.value);
                  el.style.fontSize='14pt';
                  el.style.color = eval(clor.value)
                }
              }
            }catch(_){ }
            try{
              if(String(clor.value).substring(1,5)==='http' || String(clor.value).startsWith('http')){
                el.innerHTML = "<img id='io"+o+"' src='"+eval(clor.value)+"' width='"+(eval(wL.value))+"' height='"+(eval(hT.value))+"'>";
              }
            }catch(_){ }
            try{ el.style.top = (Number(eval(scodeY.value))||0) + "px"; }catch(_){ el.style.top = (Number(eval(scodeY.value))||0) + "px"; }
            try{ el.style.left = (Number(eval(scodeX.value))||0) + "px"; }catch(_){ el.style.left = (Number(eval(scodeX.value))||0) + "px"; }
            isIndex[isId] = Math.round(Number(el.style.left.replace('px',''))) + ',' + Math.round(Number(el.style.top.replace('px',''))) + ',' + Math.round(Number(el.style.top.replace('px','')));
          }
        }
        setTimeout(mvx, Number(dta.value)||0);
      } else {
        o = 0; x = 0; i = 600; y = 0; ob = 0; u=0; iu=600; zx=0;
      }
    }

    let scounter = 0; function xIt(){ lvel = Number(steps.value) + 3; }
    function setCircle(){ ofcircle = Math.floor(Number(stpEnd.value)||0); initsobj(shape.value); }
    function opaz(){ try{ const msp = selo.options[selo.selectedIndex].value; clor.value = msp.substring(4, msp.length -1); }catch(_){}}
    function tul(ctr){ if(!ctr) return; ctr.style.visibility = (ctr.style.visibility === 'hidden') ? '' : 'hidden'; }

    printit();

    function printpetit(soda){ if(soda==0){printit();} else { soda=soda-1; } }
    let gta = 360;
    function execon(){ if(gta > 0){ gta = gta-1; try{ eval(oDef.value); }catch(_){ } setTimeout(execon, Number(dta.value)||0); } else { gta = 360; } }

    function cleanup(){
      for(let _o = Number(steps.value)||1; _o<Math.floor(Number(stpEnd.value)); _o+= (Number(steps.value)||1)){
        const n = document.getElementById(shape.value+_o);
        if(n) n.innerHTML='';
      }
    }

    function initsobj(shape){
      for(let _o = Number(steps.value)||1; _o<Math.floor(Number(stpEnd.value)); _o+= (Number(steps.value)||1)){
        const nodo = document.createElement("span");
        nodo.style.position = "absolute";
        nodo.id = shape+_o;
        nodo.onclick = function() {
          mPosition.value = this.id.substring(this.id.length, this.id.length-2);
          try{ oDef.innerText = (window[shape+this.id.substring(2)]||{}).innerHTML || ''; }catch(_){ }
        };
        nodo.onmouseover = function() {
          const abou = document.createElement("div");
          abou.style.position = "absolute";
          abou.id=this.id+"abou";
          abou.innerText = "Step: "+this.id+" of "+ofcircle+"\nstepStart: "+stpStart.value+"\nstepEnd: "+stpEnd.value+"\nsSpeed : "+dta.value+"\nscodeX : "+scodeX.value+"\nscodeY : "+scodeY.value+"\nsColor : "+clor.value+"\nsCode : "+itext.value;
          this.appendChild(abou);
          mPosition.value = this.id.substring(this.id.length, this.id.length-2);
          try{ oDef.innerText = (window[shape+this.id.substring(2)]||{}).innerHTML || ''; }catch(_){ }
          this.onmouseout = function() {
            const div = this.querySelector('div');
            if(div) this.removeChild(div);
          };
        };
        nodo.style.cursor='pointer';
        document.body.appendChild(nodo);
      }
    }


    function setupeye2716_diagonalPerfect (){
  steps.value    = 1;
  stpStart.value = 0;
  stpEnd.value   = 16 * 16 - 1;     // 0..255
  shape.value    = "smileGrid";
  initsobj(shape.value);

  const cols     = 16;
  const cellSize = 20;

  // PERFECT anti-diagonal: (15 - col) - row == 0
  // from o=15 (row 0, col 15) to o=240 (row 15, col 0)
  clor.value =
    '"rgb(" + ' +
      '(((15 - (o % 16)) - Math.floor(o / 16)) === 0 ? 255 : 40)' +
      ' + ", 120, 120)"';

  // same Eye-grid positioning as your canonical eye2716
  scodeX.value =
    "(o % " + 16 + ") * " + 20 +
    " + window.innerWidth/2 - (" + 16 + " * " + 20 + ")/2 - 10";

  scodeY.value =
    "Math.floor(o / " + 16 + ") * " + 20 +
    " + 220";
};

  </script>

  <script src="https://plabs.at.ua/res/partner/download.js" defer></script>

  <!-- PNG Exporter (unchanged, with minor guards) -->
  <script type="module">
    window.onReady(() => {
      const bar = document.getElementById('exportBar');
      const expStatus = document.getElementById('expStatus');
      const btnPng = document.getElementById('btnPng');
      if (!bar || !expStatus || !btnPng) return;

      const captureTarget = document.body;
      const dpr = Math.min(2, window.devicePixelRatio || 1);
      const commonCaptureOpts = {
        useCORS: true,
        backgroundColor: null,
        scale: dpr,
        ignoreElements: (el) => el && (el.id === 'exportBar' || (el.hasAttribute && el.hasAttribute('data-export-ignore')))
      };
      const temporarilyHide = (el) => { if (!el) return ()=>{}; const old=el.style.visibility; el.style.visibility='hidden'; return ()=>{ el.style.visibility=old; }; };

      btnPng.addEventListener('click', async () => {
        if (typeof html2canvas !== 'function') { console.error('html2canvas not available'); expStatus.textContent = ' ‚ö†Ô∏è PNG failed: html2canvas missing'; return; }
        expStatus.textContent = ' Capturing PNG‚Ä¶';
        btnPng.disabled = true;
        const restore = temporarilyHide(bar);
        try {
          const canvas = await html2canvas(captureTarget, commonCaptureOpts);
          await new Promise(r => requestAnimationFrame(r));
          canvas.toBlob((blob) => {
            if (!blob) { expStatus.textContent = ' ‚ö†Ô∏è PNG failed (no blob)'; return; }
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'funebra_snapshot.png';
            a.click();
            URL.revokeObjectURL(a.href);
            expStatus.textContent = ' ‚úÖ PNG saved';
          }, 'image/png');
        } catch (err) {
          console.error(err);
          expStatus.textContent = ' ‚ö†Ô∏è PNG failed (see console)';
        } finally {
          restore();
          btnPng.disabled = false;
        }
      }, { passive:true });
    });
  </script>

  <!-- GIF Exporter (unchanged, with minor guards) -->
  <script type="module">
    window.onReady(() => {
      const bar = document.getElementById('exportBar');
      const expStatus = document.getElementById('expStatus');
      const btnGif = document.getElementById('btnGif');
      const btnPng = document.getElementById('btnPng');
      const btnCancel = document.getElementById('btnCancel');
      if (!bar || !expStatus || !btnGif || !btnPng || !btnCancel) return;

      const captureTarget = document.body;
      const dpr = Math.min(2, window.devicePixelRatio || 1);
      const totalFrames = 180;
      const delayMs = 40;
      let cancelled = false;

      const commonCaptureOpts = {
        useCORS: true,
        backgroundColor: null,
        scale: dpr,
        ignoreElements: (el) => el && (el.id === 'exportBar' || (el.hasAttribute && el.hasAttribute('data-export-ignore')))
      };
      const temporarilyHide = (el) => { if (!el) return ()=>{}; const old=el.style.visibility; el.style.visibility='hidden'; return ()=>{ el.style.visibility=old; }; };
      const captureFrame = async () => { await new Promise(r => requestAnimationFrame(r)); return html2canvas(captureTarget, commonCaptureOpts); };

      const prepareGif = async (width, height) => {
        await import('https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.min.js');
        const res = await fetch('https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.worker.js');
        if (!res.ok) throw new Error('Failed to fetch gif.worker.js');
        const workerUrl = URL.createObjectURL(await res.blob());
        const gif = new window.GIF({ workers: 4, workerScript: workerUrl, quality: 10, width, height });
        gif.on('finished', () => URL.revokeObjectURL(workerUrl));
        return gif;
      };

      btnGif.addEventListener('click', async () => {
        if (typeof html2canvas !== 'function') { console.error('html2canvas not available'); expStatus.textContent = ' ‚ö†Ô∏è GIF failed: html2canvas missing'; return; }

        btnGif.disabled = true; btnPng.disabled = true; btnCancel.style.display = '';
        cancelled = false;

        const restore = temporarilyHide(bar);
        const onCancel = () => { cancelled = true; expStatus.textContent = ' Cancelling‚Ä¶'; };
        btnCancel.addEventListener('click', onCancel, { once:true });

        try {
          expStatus.textContent = ' Measuring‚Ä¶';
          const first = await captureFrame();
          const gif = await prepareGif(first.width, first.height);

          gif.on('progress', (p) => {
            const pct = Math.max(0, Math.min(100, Math.round(p * 100)));
            expStatus.textContent = ` Encoding‚Ä¶ ${pct}%`;
          });

          expStatus.textContent = ` Recording 1/${totalFrames}‚Ä¶`;
          gif.addFrame(first, { copy:true, delay:delayMs });

          for (let i = 1; i < totalFrames; i++) {
            if (cancelled) break;
            expStatus.textContent = ` Recording ${i + 1}/${totalFrames}‚Ä¶`;
            const canvas = await captureFrame();
            gif.addFrame(canvas, { copy:true, delay:delayMs });
          }

          if (!cancelled) {
            expStatus.textContent = ' Finalizing‚Ä¶';
            gif.on('finished', (blob) => {
              const url = URL.createObjectURL(blob);
              const ts = new Date().toISOString().replace(/[:.]/g, '-');
              const a = document.createElement('a');
              a.href = url;
              a.download = `funebra_animation_${ts}.gif`;
              a.click();
              URL.revokeObjectURL(url);
              expStatus.textContent = ' ‚úÖ GIF saved';
            });
            gif.render();
          } else {
            expStatus.textContent = ' ‚ùé GIF cancelled';
          }
        } catch (err) {
          console.error(err);
          expStatus.textContent = ' ‚ö†Ô∏è GIF failed (see console)';
        } finally {
          restore();
          btnGif.disabled = false; btnPng.disabled = false; btnCancel.style.display = 'none';
        }
      }, { passive:true });
    });
  </script>
</body>
</html>
