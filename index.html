<!DOCTYPE html>
<html lang="en">
  <head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Funebra™ pScreen — Pure DOM Pixel Scanner</title>

<!-- Basic SEO -->
<meta name="description" content="Funebra™ pScreen is a pure DOM pixel-screen scanner that transforms grids and visuals into bn-point data for mathematical, musical, and perceptual analysis." />
<meta name="keywords" content="Funebra, pScreen, bn-points, pixel scanner, DOM grid, math art, generative art, Eye27, Ear27, perception engine" />
<meta name="author" content="Peter M. Lugha — Funebra™" />
<meta name="robots" content="index, follow" />

<!-- Open Graph (Facebook, LinkedIn, etc.) -->
<meta property="og:type" content="website" />
<meta property="og:title" content="Funebra™ pScreen — Pure DOM Pixel Scanner" />
<meta property="og:description" content="A Funebra™ perception engine that scans pixel grids into bn-point data using pure DOM — no canvas, no plugins." />
<meta property="og:url" content="https://funebra.github.io/pScreen/" />
<meta property="og:image" content="https://funebra.github.io/pScreen/og.png" />
<meta property="og:site_name" content="Funebra™" />

<!-- Twitter / X -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Funebra™ pScreen — Pure DOM Pixel Scanner" />
<meta name="twitter:description" content="Scan pixel grids into bn-points. Pure DOM. Math-art. Perception research." />
<meta name="twitter:image" content="https://funebra.github.io/pScreen/og.png" />

<!-- Theme / UI -->
<meta name="theme-color" content="#06080b" />
<meta name="color-scheme" content="dark" />

<!-- Funebra identity -->
<meta name="application-name" content="Funebra™ pScreen" />
<meta name="generator" content="Funebra™ System" />

<style>
  :root{
    --bg:#06080b;
    --panel:#0b0f15;
    --ink:#e8eef6;
    --muted:#93a4b8;
    --line:rgba(255,255,255,.10);
    --accent:#15b6ff;
    --good:#46ff9a;
    --warn:#ffd166;
    --bad:#ff4d6d;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    background:radial-gradient(1200px 700px at 30% 0%, rgba(21,182,255,.18), transparent 55%),
               radial-gradient(900px 600px at 70% 100%, rgba(70,255,154,.12), transparent 55%),
               var(--bg);
    color:var(--ink);
    min-height:100vh;
    display:flex;
    flex-direction:column;
  }
  header{
    padding:18px 18px 10px;
    border-bottom:1px solid var(--line);
    background:linear-gradient(to bottom, rgba(255,255,255,.06), transparent);
  }
  .topline{
    display:flex;
    gap:12px;
    align-items:baseline;
    flex-wrap:wrap;
  }
  h1{
    margin:0;
    font-size:18px;
    letter-spacing:.06em;
    text-transform:uppercase;
  }
  .tag{
    color:var(--muted);
    font-size:13px;
  }
  .layout{
    display:grid;
    grid-template-columns: 1.1fr .9fr;
    gap:14px;
    padding:14px;
    width:min(1200px, 100%);
    margin:0 auto;
    flex:1;
  }
  @media (max-width: 980px){
    .layout{grid-template-columns:1fr}
  }
  .card{
    background:rgba(11,15,21,.82);
    border:1px solid var(--line);
    border-radius:18px;
    overflow:hidden;
    box-shadow:0 14px 40px rgba(0,0,0,.35);
  }
  .card .hd{
    padding:12px 14px;
    border-bottom:1px solid var(--line);
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
  }
  .card .hd b{letter-spacing:.04em}
  .card .bd{padding:14px}
  .controls{
    display:grid;
    grid-template-columns: repeat(2, minmax(0,1fr));
    gap:10px;
  }
  .controls .row{
    border:1px solid var(--line);
    border-radius:14px;
    padding:10px;
    background:rgba(255,255,255,.03);
  }
  .row label{
    display:flex;
    justify-content:space-between;
    gap:10px;
    font-size:12px;
    color:var(--muted);
    margin-bottom:6px;
  }
  input[type="range"]{width:100%}
  input[type="number"], select, input[type="text"]{
    width:100%;
    border-radius:12px;
    border:1px solid var(--line);
    background:rgba(0,0,0,.25);
    color:var(--ink);
    padding:8px 10px;
    outline:none;
  }
  .btnbar{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    margin-top:12px;
  }
  button{
    border:none;
    border-radius:999px;
    padding:10px 14px;
    font-weight:700;
    cursor:pointer;
    color:#041015;
    background:var(--accent);
    box-shadow:0 10px 22px rgba(21,182,255,.25);
  }
  button.secondary{
    background:rgba(255,255,255,.08);
    color:var(--ink);
    border:1px solid var(--line);
    box-shadow:none;
  }
  button.danger{
    background:var(--bad);
    color:#16050a;
  }
  button:active{transform:translateY(1px)}
  .gridWrap{
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  .meta{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    color:var(--muted);
    font-size:12px;
    align-items:center;
    justify-content:space-between;
  }
  .pill{
    border:1px solid var(--line);
    border-radius:999px;
    padding:6px 10px;
    background:rgba(255,255,255,.04);
  }

  /* The actual pure DOM pixel-grid */
  #screen{
    --cols: 32;
    --rows: 18;
    --cell: 18px;

    display:grid;
    grid-template-columns: repeat(var(--cols), var(--cell));
    grid-template-rows: repeat(var(--rows), var(--cell));
    gap:2px;
    padding:12px;
    border-radius:18px;
    border:1px solid var(--line);
    background:rgba(0,0,0,.35);
    user-select:none;
    touch-action:none;
    place-content:center;
    overflow:auto;
  }
  .px{
    width:var(--cell);
    height:var(--cell);
    border-radius:6px;
    background:rgba(255,255,255,.03);
    border:1px solid rgba(255,255,255,.06);
    position:relative;
  }
  .px.on{
    background:rgba(21,182,255,.22);
    border-color:rgba(21,182,255,.42);
    box-shadow: inset 0 0 0 1px rgba(21,182,255,.25);
  }
  .px.on::after{
    content:"";
    position:absolute;
    inset:3px;
    border-radius:5px;
    background:rgba(21,182,255,.35);
  }
  .px.hit{
    outline:2px solid rgba(70,255,154,.65);
    outline-offset:1px;
  }

  .stats{
    display:grid;
    grid-template-columns: repeat(2, minmax(0,1fr));
    gap:10px;
  }
  .stat{
    border:1px solid var(--line);
    border-radius:14px;
    padding:10px;
    background:rgba(255,255,255,.03);
  }
  .stat .k{color:var(--muted);font-size:12px}
  .stat .v{font-size:18px;font-weight:800;margin-top:2px}
  pre{
    margin:0;
    padding:10px;
    border-radius:14px;
    border:1px solid var(--line);
    background:rgba(0,0,0,.35);
    overflow:auto;
    max-height:220px;
    font-size:12px;
    color:#dbe7f6;
  }
  .smallnote{
    font-size:12px;
    color:var(--muted);
    line-height:1.4;
    margin-top:10px;
  }
  footer{
    padding:12px 16px;
    color:var(--muted);
    font-size:12px;
    border-top:1px solid var(--line);
    text-align:center;
  }
  a{color:var(--accent); text-decoration:none}
  a:hover{text-decoration:underline}
</style>
</head>
<body>

<header>
  <div class="topline">
    <h1>Funebra™ pScreen</h1>
    <div class="tag">Pure DOM pixel-screen scanner demo → bn-points</div>
  </div>
</header>

<main class="layout">
  <!-- LEFT: Screen -->
  <section class="card">
    <div class="hd">
      <b>pScreen Surface</b>
      <div class="meta">
        <span class="pill" id="modePill">Mode: Paint</span>
        <span class="pill" id="coordPill">x: —  y: —</span>
      </div>
    </div>
    <div class="bd">
      <div class="gridWrap">
        <div id="screen" aria-label="pScreen pixel grid"></div>

        <div class="meta">
          <span class="pill">Tip: drag to paint • Shift = erase • Ctrl = invert cell</span>
          <span class="pill" id="densityPill">Density: —%</span>
        </div>
      </div>
    </div>
  </section>

  <!-- RIGHT: Controls + Scanner Output -->
  <aside class="card">
    <div class="hd">
      <b>Scanner Controls</b>
      <span class="tag">pScreen → bn-points</span>
    </div>
    <div class="bd">
      <div class="controls">
        <div class="row">
          <label>
            <span>Columns</span>
            <span id="colsVal">32</span>
          </label>
          <input id="cols" type="range" min="8" max="96" value="32" />
        </div>

        <div class="row">
          <label>
            <span>Rows</span>
            <span id="rowsVal">18</span>
          </label>
          <input id="rows" type="range" min="6" max="64" value="18" />
        </div>

        <div class="row">
          <label>
            <span>Cell Size</span>
            <span id="cellVal">18</span>
          </label>
          <input id="cell" type="range" min="10" max="30" value="18" />
        </div>

        <div class="row">
          <label>
            <span>Threshold (0..1)</span>
            <span id="thrVal">0.50</span>
          </label>
          <input id="thr" type="range" min="0" max="100" value="50" />
        </div>

        <div class="row" style="grid-column:1 / -1">
          <label>
            <span>Pattern</span>
            <span>Preset draw</span>
          </label>
          <select id="preset">
            <option value="none">— none —</option>
            <option value="diag">Diagonal</option>
            <option value="smile">Smile (Eye-ish)</option>
            <option value="ring">Ring</option>
            <option value="noise">Noise</option>
            <option value="word:BN">Word: BN</option>
            <option value="word:2741">Word: 2741</option>
          </select>
        </div>
      </div>

      <div class="btnbar">
        <button id="scanBtn">Scan → bn</button>
        <button class="secondary" id="clearBtn">Clear</button>
        <button class="secondary" id="invertBtn">Invert</button>
        <button class="secondary" id="exportBtn">Export JSON</button>
        <button class="danger" id="resetBtn">Reset Grid</button>
      </div>

      <div style="height:12px"></div>

      <div class="stats">
        <div class="stat">
          <div class="k">Active pixels</div>
          <div class="v" id="activePx">0</div>
        </div>
        <div class="stat">
          <div class="k">bn-points</div>
          <div class="v" id="bnCount">0</div>
        </div>
        <div class="stat">
          <div class="k">Center of mass (x,y)</div>
          <div class="v" id="com">—</div>
        </div>
        <div class="stat">
          <div class="k">Symmetry (L↔R)</div>
          <div class="v" id="sym">—</div>
        </div>
      </div>

      <div style="height:12px"></div>

      <pre id="out" aria-label="Scanner output JSON"></pre>

      <div class="smallnote">
        pScreen demo is <b>pure DOM</b>: each cell is a div.
        Scan converts ON-cells into <b>bn*</b> point instances (Funebra point IDs).
        You can wire this output into Eye2716/Ear27 later.
      </div>
    </div>
  </aside>
</main>

<footer>
  © Funebra™ • pScreen demo • Pure DOM scanner • <a href="https://funebra.github.io" target="_blank" rel="noopener">funebra.github.io</a>
</footer>

<script type="module">
import { pScreenCore } from "./src/pScreen.core.js";
import { pScreenScan } from "./src/pScreen.scan.js";
import { pScreenBN }   from "./src/pScreen.bn.js";

/* Boot sequence */
const app = pScreenCore({
  screen: document.getElementById("screen")
});

pScreenScan(app);
pScreenBN(app);

/* Expose for console / demos */
window.pScreen = app;
</script>

</body>
</html>

